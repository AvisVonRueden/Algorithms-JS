<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 有效的巡视方案中，骑士会从棋盘的 左上角 出发，并且访问棋盘上的每个格子 恰好一次 。

      // 方法一：直接模拟
      // 时间复杂度：O(n^2)
      // 时间复杂度：O(n^2)
      var checkValidGrid = function (grid) {
        if (grid[0][0] != 0) {
          return false;
        }
        const n = grid.length;
        let indices = Array(n * n)
          .fill()
          .map(() => Array(2));
        for (let i = 0; i < n; i++) {
          for (let j = 0; j < n; j++) {
            indices[grid[i][j]][0] = i;
            indices[grid[i][j]][1] = j;
          }
        }
        for (let i = 1; i < n * n; i++) {
          let dx = Math.abs(indices[i][0] - indices[i - 1][0]);
          let dy = Math.abs(indices[i][1] - indices[i - 1][1]);
          if (dx * dy != 2) {
            return false;
          }
        }
        return true;
      };

      // test
      let grid = [
        [0, 11, 16, 5, 20],
        [17, 4, 19, 10, 15],
        [12, 1, 8, 21, 6],
        [3, 18, 23, 14, 9],
        [24, 13, 2, 7, 22],
      ];
      console.log(checkValidGrid(grid));
    </script>
  </body>
</html>
